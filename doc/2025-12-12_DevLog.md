# 개발 로그: 2025-12-12

## 요약 (Summary)
오늘의 작업은 의존성 관리 개선을 위한 아키텍처 리팩토링, 패킷 디스패칭 성능 최적화, 그리고 포괄적인 프로젝트 문서화에 집중되었습니다.

## 주요 변경 사항 (Key Changes)

### 1. 리팩토링: AsioSession 의존성 주입 (DI)
- **목표**: `AsioSession`에서 전역 `GetDispatcher()`에 대한 암시적 의존성을 제거하고 명시적인 의존성 주입을 사용합니다.
- **구현**:
    - `IDispatcher*` 전달 흐름 구축: **`Framework`** -> **`AsioService`** -> **`SessionFactory`** -> **`AsioSession`**.
    - **`AsioSession`**: `IDispatcher*` 멤버 변수 추가 및 `Reset()`을 통한 주입.
    - **`DispatcherImpl`**: `GetDispatcher()`/`SetGlobalDispatcher` 정적 접근자 및 전역 인스턴스 제거.
    - **검증**: `DummyClient` 에코 테스트를 통해 세션이 주입된 디스패처와 올바르게 통신함을 확인.

### 2. 최적화: 락-프리 세션 디스패칭 (Lock-Free Session Dispatching)
- **목표**: `Dispatcher`의 패킷 처리 중 발생하는 `SessionFactory::FindSession` 락 경합(Lock Contention) 제거.
- **구현**:
    - **`SystemMessage`**: `std::shared_ptr<ISession>` 필드 추가.
    - **`AsioSession`**: `NETWORK_DATA`, `CONNECT`, `DISCONNECT` 메시지 전송 시 `shared_from_this()`를 직접 담아서 전달.
    - **`DispatcherImpl`**: `SessionMap` 검색을 우회하고 `SystemMessage`에 담긴 포인터를 직접 사용.
- **결과**: 네트워크 스레드(연결/종료)와 로직 스레드(패킷 처리) 간의 락 경합 감소.

### 3. 문서화 및 표준 (Documentation & Standards)
- **`doc/coding_convention.md`**: 디렉토리 구조(인터페이스/구현 분리), 네이밍 규칙(`I` 접두어, `Manager` 지양), DI 패턴 등을 문서화.
- **`README.md`**: 프로젝트 소개, 기능(크로스 플랫폼, C++20), 빌드 가이드(Vcpkg + CMake)를 포함한 포괄적인 설명 문서 생성 (한글).
- **`LICENSE`**: 저작권 표시 의무가 있는 **BSD 3-Clause License** 적용 (영문).
- **`.gitignore`**: `build/`, `vcpkg_installed/`, 로그, 덤프 파일 등에 대한 무시 규칙 추가.

### 4. 코드 유지보수
- **수동 사용자 편집**: `IPacketHandler.h` 헤더 포함 순서 수정 반영.
- **정리**: 컴파일 의존성을 최소화하기 위해 엄격한 헤더 포함 계층 구조 확인.

## 다음 단계 (Next Steps)
- `DummyClient` 로직 기능 구현 계속.
- 로직 레이어(Logic Layer) 구현 탐색.
