# 2026-02-10 개발 로그 (DevLog)

## 📌 주요 작업 요약
오늘은 **뱀파이어 서바이버(Vampire Survivor)** 스타일의 핵심 무기 시스템을 완성하기 위해 서버의 판정 로직과 클라이언트의 시각적 연출, 그리고 이를 연결하는 정교한 데이터/통신 시스템을 구축했습니다.

---

## 🛠️ 상세 작업 내용

### 1. 고급 무기 판정 시스템 (Server-side)
`DamageEmitter` 클래스를 확장하여 단순 투사체 외의 4가지 공격 패턴을 추가했습니다.
- **Orbit (성서형)**: 플레이어 주변을 공전하며 적을 관통하는 투사체 판정.
- **Aura (마늘형)**: 플레이어 중심의 상시 원형 데미지 장판 판정.
- **Zone (번개형)**: 공격 범위 내 랜덤한 적 위치에 즉시 데미지를 주는 점(Point) 판정.
- **Directional (채찍형)**: 플레이어 정면 일정 거리를 직사각형 형태로 타격하는 근접 판정.

### 2. 가중치 기반 레벨업 및 진화 시스템
단순 무작위 선택에서 벗어나 실제 상용 게임 급의 추첨 로직을 구현했습니다.
- **Weighted Random**: 아이템마다 설정된 `weight` 값을 기반으로 한 확률 추첨 시스템 (LevelUpManager).
- **Evolution (진화)**: 주무기 마스터 레벨과 특정 패시브 보유 조건을 체크하여 상위 아이템(진화 무기)을 선택지에 노출.
- **Unique Group**: 채찍과 진화된 채찍처럼 같은 계열의 무기가 중복 장착되지 않도록 그룹화 로직 적용.

### 3. 클라이언트 비주얼 및 동기화 시스템 (Unity & Network)
서버의 판정에 맞춘 최적화된 연출 시스템을 구축했습니다.
- **시각적 연출 구현**:
    - `OrbitVisual`: 부드러운 회전 공전 연출.
    - `AuraVisual`: 펄스(Pulse) 효과를 포함한 장판 연출.
- **멀티플레이어 동기화 확장**:
    - `S_UpdateInventory` 패킷에 `player_id` 필드를 추가하여, **나뿐만 아니라 다른 플레이어의 무기 이펙트**도 실시간으로 보이도록 구현.
- **자동 부착 시스템**: `ObjectManager`에서 플레이어 스폰 시 필요한 비주얼 컴포넌트를 자동으로 장착하고 갱신.

### 4. 데이터 통합 및 최적화
- **JSON 데이터 재정비**: 기존 무기/패시브의 모든 레벨 데이터를 유지하면서 신규 속성(가중치, 진화 조건 등)을 완벽하게 통합.
- **코드 품질 개선**: `LevelUpManager`의 메서드들을 `static`으로 정비하고, C++ signedness 관련 경고들을 제거하여 안정성 확보.

---

## 📊 추가된 데이터 (핵심 예시)
- **신규 무기**: King Bible(성서), Lightning Ring(번개), Whip(채찍), Garlic(마늘)
- **진화 무기**: Bloody Whip(진화 채찍), Unholy Vespers(진화 성서)

## 🚀 다음 단계 제언
- 현재 비주얼 에셋(스프라이트/프리팹)은 Fallback(큐브 등)으로 동작하므로, 실제 아트 리소스가 준비되면 `Resources/Textures` 폴더에 매칭되는 이름으로 추가하면 즉시 적용됩니다.
